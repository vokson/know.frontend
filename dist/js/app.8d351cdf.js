(function(t){function e(e){for(var i,n,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&m.push(a[n][0]),a[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(i=!1)}i&&(r.splice(e--,1),t=n(n.s=s[0]))}return t}var i={},a={app:0},r=[];function n(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=i,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var i=s("85ec"),a=s.n(i);a.a},"19ab":function(t,e,s){t.exports=s.p+"img/prev.3569cbc3.png"},"32ff":function(t,e,s){},5585:function(t,e,s){t.exports=s.p+"img/next.5111b6f5.png"},"56d7":function(t,e,s){"use strict";s.r(e);s("b680"),s("d3b7"),s("25f0"),s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("notifications",{attrs:{group:"notify-group"}}),s("b-nav",{staticClass:"bg-light",attrs:{tabs:""}},[s("b-nav-item",{attrs:{to:{name:"home"}}},[t._v("Начало")]),s("b-nav-item",{attrs:{to:{name:"login"}}},[t._v("Вход")]),s("b-nav-item",{attrs:{to:{name:"article_search"}}},[t._v("Статьи")]),t.isNewArticleToBeShown?s("b-nav-item",{attrs:{to:{name:"article_editor"}}},[t._v("Новая статья")]):t._e(),t.isTagToBeShown?s("b-nav-item",{attrs:{to:{name:"tag"}}},[t._v("Тэги")]):t._e(),t.isAdminToBeShown?s("b-nav-item",{attrs:{to:{name:"admin"}}},[t._v("Admin")]):t._e(),t._l(t.downloadingFiles,(function(e){return s("div",{key:e.uin},[e.downloadedSize<e.size?s("b-nav-item",[t._v(t._s(Math.round(e.downloadedSize/e.size*100))+"%")]):t._e()],1)}))],2),s("router-view")],1)},r=[],n={name:"App",computed:{role:function(){return this.$store.getters["auth/giveRole"]},isNewArticleToBeShown:function(){return"editor"==this.role||"admin"==this.role},isTagToBeShown:function(){return"editor"==this.role||"admin"==this.role},isAdminToBeShown:function(){return"admin"==this.role},downloadingFiles:function(){return this.$store.getters["download/give"]}},methods:{}},o=n,c=(s("034f"),s("2877")),l=Object(c["a"])(o,a,r,!1,null,null,null),u=l.exports,d=s("8c4f"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-8"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h3",[t._v(" Знайка "),s("span",{staticClass:"actual_version_color"},[t._v("(v."+t._s(t.version)+")")])])])]),s("div",{staticClass:"row"}),s("div",{staticClass:"row"},[t._m(0),s("div",{staticClass:"col-5"},[s("p",[t._v(t._s(t.email))])])]),s("div",{staticClass:"row"},[t._m(1),s("div",{staticClass:"col-5"},[s("p",[t._v(t._s(t.name))])])]),s("div",{staticClass:"row"},[t._m(2),s("div",{staticClass:"col-5"},[s("p",[t._v(t._s(t.surname))])])]),s("div",{staticClass:"row"},[t._m(3),s("div",{staticClass:"col-5"},[s("p",[t._v(t._s(t.role))])])]),!0===t.isDefaultPassword?s("div",{staticClass:"row"},[t._m(4)]):t._e()])])]),s("div",{staticClass:"container"},[t._m(5),s("div",{staticClass:"row"},[t._m(6),s("div",{staticClass:"col-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.new_password_1,expression:"new_password_1"}],attrs:{type:"password"},domProps:{value:t.new_password_1},on:{input:function(e){e.target.composing||(t.new_password_1=e.target.value)}}})]),s("div",{staticClass:"col-1"},[!0===t.isNewPasswordOk_1?s("span",{staticClass:"badge badge-success"},[t._v("OK")]):s("span",{staticClass:"badge badge-danger"},[t._v("FAIL")])])]),s("div",{staticClass:"row"},[t._m(7),s("div",{staticClass:"col-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.new_password_2,expression:"new_password_2"}],attrs:{type:"password"},domProps:{value:t.new_password_2},on:{input:function(e){e.target.composing||(t.new_password_2=e.target.value)}}})]),s("div",{staticClass:"col-1"},[!0===t.isNewPasswordOk_2?s("span",{staticClass:"badge badge-success"},[t._v("OK")]):s("span",{staticClass:"badge badge-danger"},[t._v("FAIL")])])]),!0===t.isNewPasswordOk_1&&!0===t.isNewPasswordOk_2?s("div",{staticClass:"row"},[s("div",{staticClass:"col-1"},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.changePassword}},[t._v("Сохранить")])])]):t._e(),t._m(8),t._m(9),t._m(10),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16)])])},_=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("p",[t._v("E-mail:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("p",[t._v("Имя:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("p",[t._v("Фамилия:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("p",[t._v("Права доступа:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("span",{staticClass:"badge badge-danger"},[t._v("У вас стандартный пароль. Смените его.")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("h5",[t._v("Сменить пароль (не менее 4-х символов, без пробелов)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("p",[t._v("Новый пароль:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("p",[t._v("Новый пароль еще раз:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("br")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("h5",[t._v("История изменений")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row actual_version_color"},[s("div",{staticClass:"col-2"},[s("p",[t._v("1.2.0 - 16.09.2020")])]),s("div",{staticClass:"col-8"},[s("p",[t._v("При входе сразу попадаешь на Статьи. Изменен роутинг статей.")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("p",[t._v("1.1.1 - 04.09.2020")])]),s("div",{staticClass:"col-8"},[s("p",[t._v("Максимальный размер загружаемых файлов увеличен до 1Гб.")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("p",[t._v("1.1.0 - 07.06.2020")])]),s("div",{staticClass:"col-8"},[s("p",[t._v("Добавлен индикатор скачивания файлов.")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("p",[t._v("1.0.3 - 27.05.2020")])]),s("div",{staticClass:"col-8"},[s("p",[t._v('Добавлен фильтр "last:" в поиск. Добавлено количество найденных статей на кнопке "Поиск". Добавлен фильтр "limit:20" в качестве начала поиска.')])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("p",[t._v("1.0.2 - 27.05.2020")])]),s("div",{staticClass:"col-8"},[s("p",[t._v('Исправлено отображение изображений статей в режиме "Чтение"')])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("p",[t._v("1.0.1 - 26.05.2020")])]),s("div",{staticClass:"col-8"},[s("p",[t._v('Добавлена кнопка "Новая статья"')])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("p",[t._v("1.0.0 - 25.05.2020")])]),s("div",{staticClass:"col-8"},[s("p",[t._v("Первый релиз")])])])}],p=(s("c975"),{name:"Home",data:function(){return{selected:"",choose_language:"",new_password_1:"",new_password_2:"",version:"1.2.0"}},mounted:function(){this.$nextTick((function(){this.$store.dispatch("auth/loginByToken",{})}))},computed:{isNewPasswordOk_1:function(){return!(-1!=this.new_password_1.indexOf(" ")||this.new_password_1.length<4)},isNewPasswordOk_2:function(){return this.new_password_2===this.new_password_1&&!0===this.isNewPasswordOk_1},isDefaultPassword:function(){return this.$store.getters["auth/giveIsDefaultPassword"]},email:function(){return this.$store.getters["auth/giveEmail"]},name:function(){return this.$store.getters["auth/giveName"]},surname:function(){return this.$store.getters["auth/giveSurname"]},role:function(){return this.$store.getters["auth/giveRole"]}},methods:{changePassword:function(){this.$store.dispatch("auth/changePassword",{password:window.$sha256(this.new_password_1)})}}}),h=p,v=(s("cccb"),Object(c["a"])(h,m,_,!1,null,null,null)),f=v.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"e-mail",name:"email",placeholder:"E-mail"},domProps:{value:t.email},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},input:function(e){e.target.composing||(t.email=e.target.value)}}})]),s("div",{staticClass:"col-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("div",{staticClass:"col-6"})]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-1"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.login}},[t._v("Войти")])]),s("div",{staticClass:"col-1"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.logout}},[t._v("Выйти")])])])])])},y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h3",[t._v("Вход")])])])}],w={name:"Login",data:function(){return{email:"",password:""}},computed:{token:function(){return this.$store.getters["auth/giveAccessToken"]}},watch:{token:function(t){""!=t&&this.$router.push({name:"home"})}},methods:{login:function(){this.$store.dispatch("auth/login",{email:this.email,password:window.$sha256(this.password)})},logout:function(){this.$store.dispatch("auth/logout")}}},b=w,C=(s("d6db"),Object(c["a"])(b,g,y,!1,null,null,null)),k=C.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("b-nav",{staticClass:"w-50",attrs:{vertical:""}},[s("b-nav-item",{attrs:{to:{name:"user"}}},[s("h4",[t._v("Пользователи")])]),s("b-nav-item",{attrs:{to:{name:"action"}}},[s("h4",[t._v("Ролевые игры")])]),s("b-nav-item",{attrs:{to:{name:"setting"}}},[s("h4",[t._v("Настройки")])]),s("b-nav-item",{on:{click:t.getDatabaseBackup}},[s("h4",[t._v("Резервная копия базы данных")])])],1)],1)},$=[],E={name:"Admin",data:function(){return{}},methods:{getDatabaseBackup:function(){this.$store.dispatch("service/getDatabaseBackup")}}},N=E,T=Object(c["a"])(N,x,$,!1,null,null,null),I=T.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"row"}),t._l(t.items,(function(e){return s("div",{key:e.name,staticClass:"row align-items-center"},[s("div",{staticClass:"col-8"},[s("p",[t._v(t._s(e.name))])]),s("div",{staticClass:"col-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.value},on:{input:function(s){s.target.composing||t.$set(e,"value",s.target.value)}}})])])})),s("div",{staticClass:"row"},[s("div",{staticClass:"col-1"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.get}},[t._v("Обновить")])]),s("div",{staticClass:"col-1"},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.set}},[t._v("Сохранить")])])])],2)])},S=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h3",[t._v("Настройки")])])])}],O={name:"Setting",data:function(){return{}},mounted:function(){this.$nextTick((function(){this.get()}))},computed:{items:function(){return this.$store.getters["setting/give"]}},methods:{get:function(){this.$store.dispatch("setting/get")},set:function(){this.$store.dispatch("setting/set")}}},P=O,q=Object(c["a"])(P,A,S,!1,null,null,null),B=q.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-4"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("label",[t._v("ID: "+t._s(t.targetItem.id))])])]),s("div",{staticClass:"row"},[t._m(1),s("div",{staticClass:"col-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.targetItem.email,expression:"targetItem.email"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.targetItem.email},on:{input:function(e){e.target.composing||t.$set(t.targetItem,"email",e.target.value)}}})])]),s("div",{staticClass:"row"},[t._m(2),s("div",{staticClass:"col-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.targetItem.surname,expression:"targetItem.surname"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.targetItem.surname},on:{input:function(e){e.target.composing||t.$set(t.targetItem,"surname",e.target.value)}}})])]),s("div",{staticClass:"row"},[t._m(3),s("div",{staticClass:"col-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.targetItem.name,expression:"targetItem.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.targetItem.name},on:{input:function(e){e.target.composing||t.$set(t.targetItem,"name",e.target.value)}}})])]),s("div",{staticClass:"row"},[t._m(4),s("div",{staticClass:"col-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.targetItem.role,expression:"targetItem.role"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.targetItem.role},on:{input:function(e){e.target.composing||t.$set(t.targetItem,"role",e.target.value)}}})])]),s("div",{staticClass:"row"},[t._m(5),s("div",{staticClass:"col-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.targetItem.active,expression:"targetItem.active"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.targetItem.active},on:{input:function(e){e.target.composing||t.$set(t.targetItem,"active",e.target.value)}}})])]),s("div",{staticClass:"row"},[t._m(6),s("div",{staticClass:"col-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.targetItem.permission_expression,expression:"targetItem.permission_expression"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.targetItem.permission_expression},on:{input:function(e){e.target.composing||t.$set(t.targetItem,"permission_expression",e.target.value)}}})])]),1==t.isNewItemMayBeAdded?s("div",{staticClass:"row"},[s("div",{staticClass:"col-5"}),s("div",{staticClass:"col-7"},[s("button",{staticClass:"btn btn-block btn-primary",attrs:{type:"button"},on:{click:t.addItem}},[t._v("Добавить")])])]):s("div",{staticClass:"row"},[s("div",{staticClass:"col-5"}),s("div",{staticClass:"col-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-block btn-warning",attrs:{type:"button"},on:{click:t.modifyItem}},[t._v("Изменить")])]),s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-block btn-danger",attrs:{type:"button"},on:{click:t.deleteItem}},[t._v("Удалить")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-block btn-danger",attrs:{type:"button"},on:{click:t.setDefaultPassword}},[t._v("Сбросить пароль")])])])])])])]),s("br"),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-block btn-success",attrs:{type:"button"},on:{click:t.getItems}},[t._v(" Поиск "),s("span",{staticClass:"badge badge-light"},[t._v(t._s(t.countOfItems))])])])]),s("div",{staticClass:"row"},[s("table",{staticClass:"table table-striped"},[t._m(7),s("tbody",[s("tr",{staticClass:"text-center",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.getItems(e))}}},[s("td"),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.email,expression:"search.email"}],attrs:{type:"text"},domProps:{value:t.search.email},on:{input:function(e){e.target.composing||t.$set(t.search,"email",e.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.surname,expression:"search.surname"}],attrs:{type:"text"},domProps:{value:t.search.surname},on:{input:function(e){e.target.composing||t.$set(t.search,"surname",e.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.name,expression:"search.name"}],attrs:{type:"text"},domProps:{value:t.search.name},on:{input:function(e){e.target.composing||t.$set(t.search,"name",e.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.role,expression:"search.role"}],attrs:{type:"text"},domProps:{value:t.search.role},on:{input:function(e){e.target.composing||t.$set(t.search,"role",e.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.active,expression:"search.active"}],attrs:{type:"text"},domProps:{value:t.search.active},on:{input:function(e){e.target.composing||t.$set(t.search,"active",e.target.value)}}})])]),t._l(t.items,(function(e){return s("tr",{key:e.id,staticClass:"text-center",on:{click:function(s){return t.editItem(e.id)}}},[s("td",[t._v(t._s(e.id))]),s("td",[t._v(t._s(e.email))]),s("td",[t._v(t._s(e.surname))]),s("td",[t._v(t._s(e.name))]),s("td",[t._v(t._s(e.role))]),s("td",[t._v(t._s(e.active))])])}))],2)])])])},D=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h3",[t._v("Список пользователей")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("label",[t._v("E-mail")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("label",[t._v("Фамилия")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("label",[t._v("Имя")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("label",[t._v("Роль")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("label",[t._v("Активен?")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-5"},[s("label",[t._v("Разрешенная область")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",{staticClass:"text-center"},[s("th",[t._v("ID")]),s("th",[t._v("E-mail")]),s("th",[t._v("Фамилия")]),s("th",[t._v("Имя")]),s("th",[t._v("Роль")]),s("th",[t._v("Активен?")])])])}],F=(s("4de4"),s("b0c0"),s("ac1f"),s("841c"),{name:"User",data:function(){return{isNewItemMayBeAdded:!0,targetItem:{id:null,email:"",surname:"",name:"",role:"",active:"",permission_expression:""},search:{email:"",surname:"",name:"",role:"",active:""}}},computed:{items:function(){return this.$store.getters["users/give"]},countOfItems:function(){return null==this.items?0:this.items.length}},methods:{getItems:function(){this.$store.dispatch("users/get",{email:this.search.email,surname:this.search.surname,name:this.search.name,role:this.search.role,active:this.search.active})},addItem:function(){this.$store.dispatch("users/create",{email:this.targetItem.email,surname:this.targetItem.surname,name:this.targetItem.name,role:this.targetItem.role,active:this.targetItem.active,permission_expression:this.targetItem.permission_expression})},modifyItem:function(){this.$store.dispatch("users/set",{id:this.targetItem.id,email:this.targetItem.email,surname:this.targetItem.surname,name:this.targetItem.name,role:this.targetItem.role,active:this.targetItem.active,permission_expression:this.targetItem.permission_expression})},setDefaultPassword:function(){this.$store.dispatch("users/setDefaultPassword",{id:this.targetItem.id})},deleteItem:function(){this.$store.dispatch("users/del",{id:this.targetItem.id})},editItem:function(t){var e=this.items.filter((function(e){return e.id===t}))[0];this.targetItem.id=e.id,this.targetItem.email=e.email,this.targetItem.surname=e.surname,this.targetItem.name=e.name,this.targetItem.role=e.role,this.targetItem.active=e.active,this.targetItem.permission_expression=e.permission_expression,this.isNewItemMayBeAdded=!1}}}),R=F,j=(s("e8c3"),Object(c["a"])(R,U,D,!1,null,null,null)),z=j.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"row"}),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",[s("table",{staticClass:"table-responsive"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}}),t._l(t.listOfRoles,(function(e,i){return s("th",{key:"role-"+i,attrs:{scope:"col"}},[t._v(t._s(e))])}))],2)]),s("tbody",t._l(t.listOfActions,(function(e,i){return s("tr",{key:"action-"+i},[s("th",{attrs:{scope:"row"}},[t._v(t._s(e))]),t._l(t.listOfRoles,(function(i,a){return s("td",{key:"role-"+a,attrs:{scope:"col",align:"center"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.pairs[e][i],expression:"pairs[action][role]"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(t.pairs[e][i])?t._i(t.pairs[e][i],null)>-1:t.pairs[e][i]},on:{change:function(s){var a=t.pairs[e][i],r=s.target,n=!!r.checked;if(Array.isArray(a)){var o=null,c=t._i(a,o);r.checked?c<0&&t.$set(t.pairs[e],i,a.concat([o])):c>-1&&t.$set(t.pairs[e],i,a.slice(0,c).concat(a.slice(c+1)))}else t.$set(t.pairs[e],i,n)}}})])}))],2)})),0)])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.get}},[t._v("Обновить")])]),s("div",{staticClass:"col-2"},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.set}},[t._v("Сохранить")])])])])])},L=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h3",[t._v("Действия и роли")])])])}],M=(s("4160"),s("a9e3"),s("b64b"),s("159b"),{name:"Action",data:function(){return{}},mounted:function(){this.$nextTick((function(){this.get()}))},computed:{pairs:function(){return this.$store.getters["action/give"]},listOfRoles:function(){return null===this.pairs?null:Object.keys(this.pairs[this.listOfActions[0]])},listOfActions:function(){return null===this.pairs?null:Object.keys(this.pairs)}},methods:{get:function(){this.$store.dispatch("action/get")},set:function(){var t=this,e={};this.listOfActions.forEach((function(s){e[s]={},t.listOfRoles.forEach((function(i){e[s][i]=Number(t.pairs[s][i])}))})),this.$store.dispatch("action/set",{items:e})}}}),G=M,H=Object(c["a"])(G,V,L,!1,null,null,null),Q=H.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h3",[t._v("Статья "+t._s(t.articleUin)+" : "+t._s(t.articleVersion))])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.articleSubject,expression:"articleSubject"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Название"},domProps:{value:t.articleSubject},on:{input:function(e){e.target.composing||(t.articleSubject=e.target.value)}}})])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col",attrs:{id:"col-drop-area"}},[0==t.isDragging?s("editor",{model:{value:t.articleBody,callback:function(e){t.articleBody=e},expression:"articleBody"}}):s("div",{attrs:{id:"article-drop-area"}},[t._v(t._s("Брось файл сюда (каждый не более "+t.formatBytes(t.maxFileSize)+")"))])],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("button",{staticClass:"btn btn-block btn-success",attrs:{type:"button"},on:{click:t.saveArticle}},[t._v("Сохранить")])]),s("div",{staticClass:"col-6"},[s("button",{staticClass:"btn btn-block btn-primary",attrs:{type:"button"},on:{click:t.saveArticleTags}},[t._v("Сохранить ключевые слова")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-9"},[s("button",{staticClass:"btn btn-block btn-warning",attrs:{type:"button"},on:{click:t.gotoReader}},[t._v("Читать (не забудь сохранить)")])]),s("div",{staticClass:"col-3"},[s("button",{staticClass:"btn btn-block btn-danger",attrs:{type:"button"},on:{click:t.deleteArticle}},[t._v("Удалить")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[null!=t.articleUin&&t.attachedFiles.length>0?s("div",[s("a",{attrs:{href:"#"},on:{click:t.downloadAllFiles}},[t._v("Скачать все файлы zip архивом")])]):t._e(),t._l(t.attachedFiles,(function(e){return s("div",{key:e.uin,staticClass:"row"},[s("div",{staticClass:"col-1"},[e.uploadedSize>=e.size?s("span",{staticClass:"badge badge-success"},[t._v("OK")]):s("span",{staticClass:"badge badge-warning"},[t._v(t._s(Math.round(e.uploadedSize/e.size*100))+"%")])]),null!=e.id?s("div",{staticClass:"col-7"},[s("a",{attrs:{href:"#"},on:{click:function(s){return t.downloadFile(e.id)}}},[t._v(t._s(e.original_name))])]):s("div",{staticClass:"col-9"},[t._v(t._s(e.original_name))]),s("div",{staticClass:"col-2"},[t._v(t._s(t.formatBytes(e.size)))]),null!=e.id?s("div",{staticClass:"col-1"},[s("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.deleteFile(e.id)}}},[t._v("Удалить")])]):t._e()])}))],2)]),s("br"),s("div",{staticClass:"row"},t._l(t.tagColumnCount,(function(e){return s("div",{key:e,staticClass:"col-3"},t._l(t.sliceTags(e-1),(function(e){return s("div",{key:e.name,staticClass:"row align-items-center article_search_checkbox_block"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.isChecked,expression:"elem.isChecked"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.isChecked)?t._i(e.isChecked,null)>-1:e.isChecked},on:{change:function(s){var i=e.isChecked,a=s.target,r=!!a.checked;if(Array.isArray(i)){var n=null,o=t._i(i,n);a.checked?o<0&&t.$set(e,"isChecked",i.concat([n])):o>-1&&t.$set(e,"isChecked",i.slice(0,o).concat(i.slice(o+1)))}else t.$set(e,"isChecked",r)}}}),s("label",{staticClass:"article_editor_checkbox_label",attrs:{for:"checkbox"}},[t._v(t._s(e.name))])])})),0)})),0)])},Y=[],Z=(s("caad"),s("d81d"),s("fb6a"),s("2532"),s("2909")),J={name:"ArticleEditor",data:function(){return{date_format:"dd.MM.yyyy",isDragging:!1,maxFileSize:1048576e3,tagColumnCount:4}},mounted:function(){this.$nextTick((function(){var t=this;this.listOfTags(),this.$route.params.uin?this.getArticle({uin:this.$route.params.uin}):this.newArticle();var e=document.getElementById("col-drop-area");function s(t){t.preventDefault(),t.stopPropagation()}["dragenter","dragover","dragleave","drop"].forEach((function(t){e.addEventListener(t,s,!1)})),["dragenter","dragover"].forEach((function(s){e.addEventListener(s,t.startDragging,!1)})),["dragleave","drop"].forEach((function(s){e.addEventListener(s,t.stopDragging,!1)})),["drop"].forEach((function(s){e.addEventListener(s,t.handleDrop,!1)}))}))},computed:{articleUin:{get:function(){return this.$store.getters["article/giveUin"]},set:function(t){this.$store.commit("article/updateUin",t,{root:!0})}},articleVersion:{get:function(){return this.$store.getters["article/giveVersion"]},set:function(t){this.$store.commit("article/updateVersion",t,{root:!0})}},articleSubject:{get:function(){return this.$store.getters["article/giveSubject"]},set:function(t){this.$store.commit("article/updateSubject",t,{root:!0})}},articleBody:{get:function(){return this.$store.getters["article/giveBody"]},set:function(t){this.$store.commit("article/updateBody",t,{root:!0})}},articleTags:{get:function(){return this.$store.getters["tag/giveOnlyForSingleArticle"]},set:function(t){this.$store.commit("tag/updateOnlyForSingleArticle",t,{root:!0})}},tagRowCount:function(){return Math.ceil(this.allTags.length/this.tagColumnCount)},allTags:function(){return this.$store.getters["tag/give"]},mixedTags:function(){var t=this,e=[];return this.allTags.forEach((function(s){var i=t.articleTags.includes(s),a={name:s,isChecked:i};e.push(a)})),e},attachedFiles:function(){return this.$store.getters["article_file/give"]}},methods:{sliceTags:function(t){return null===this.allTags||null===this.articleTags?[]:this.mixedTags.slice(t*this.tagRowCount,(t+1)*this.tagRowCount)},saveArticle:function(){this.$store.dispatch("article/set",{})},deleteArticle:function(){this.$store.dispatch("article/delete",{})},newArticle:function(){this.$store.commit("article/new",{}),this.$store.commit("article_file/newArticle",{}),this.$store.commit("tag/newArticle",{})},getArticle:function(t){this.$store.dispatch("article/get",{uin:t.uin,version:t.version})},listOfTags:function(){this.$store.dispatch("tag/list")},saveArticleTags:function(){if(null!==this.articleUin){var t=this.mixedTags.map((function(t){if(!0===t.isChecked)return t.name})).filter((function(t){return t}));this.$store.dispatch("tag/set",{article_id:this.articleUin,items:t})}else this.$store.dispatch("notify/showNotifyByCode","E_TAG_003",{root:!0})},getArticleTags:function(){this.$store.dispatch("tag/get",{article_id:this.articleUin})},gotoReader:function(){this.$router.push({name:"article_reader",params:{uin:this.articleUin}})},getFiles:function(){this.$store.dispatch("article_file/get",{article_id:this.articleUin})},deleteFile:function(t){this.$store.dispatch("article_file/delete",{file_id:t})},downloadFile:function(t){this.$store.dispatch("article_file/download",{file_id:t})},downloadAllFiles:function(){this.$store.dispatch("article_file/downloadAll",{article_id:this.articleUin})},startDragging:function(){this.isDragging=!0},stopDragging:function(){this.isDragging=!1},uploadFile:function(t){null!=this.articleUin?t.size>this.maxFileSize?this.$store.dispatch("notify/showNotifyByCode","E_FILE_004",{root:!0}):this.$store.dispatch("article_file/upload",{file:t,article_id:this.articleUin}):this.$store.dispatch("notify/showNotifyByCode","E_FILE_003",{root:!0})},handleDrop:function(t){var e=t.dataTransfer,s=e.files;s=Object(Z["a"])(s),s.forEach(this.uploadFile)},formatBytes:function(t,e){return window.$formatBytes(t,e)}},watch:{articleUin:function(){null!==this.articleUin&&(this.getArticleTags(),this.getFiles())}}},W=J,X=(s("b545"),Object(c["a"])(W,K,Y,!1,null,null,null)),tt=X.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-2"},[i("div",{staticClass:"row article_reader_left_column"},[t._v("#"+t._s(t.articleUin)+" v."+t._s(t.articleVersion))]),i("div",{staticClass:"row article_reader_left_column"},[t._v(t._s(t.articleOwner))]),i("div",{staticClass:"row article_reader_left_column"},[t._v(t._s(t.formatDate(t.articleDate)))]),i("div",{staticClass:"row article_reader_left_column"},[t.articlePreviousVersion?i("img",{attrs:{src:s("19ab"),width:"40",height:"40"},on:{click:t.getPreviousVersion}}):i("img",{attrs:{src:s("6b5e"),width:"40",height:"40"},on:{click:t.getPreviousVersion}}),t.articleNextVersion?i("img",{attrs:{src:s("5585"),width:"40",height:"40"},on:{click:t.getNextVersion}}):i("img",{attrs:{src:s("71b8"),width:"40",height:"40"},on:{click:t.getNextVersion}})]),i("br"),i("br"),i("br"),i("div",{staticClass:"row article_reader_left_column"},[i("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.gotoEditor}},[t._v("Редактировать")])]),i("div",{staticClass:"row article_reader_left_column"},[i("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.createNewInEditor}},[t._v("Новая")])]),i("br"),i("br"),t._l(t.articleTags,(function(e,s){return i("div",{key:"tag-"+s,staticClass:"row article_reader_left_column"},[i("span",{staticClass:"badge badge-primary"},[t._v(t._s(e))])])}))],2),i("div",{staticClass:"col-10"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"row"},[i("h3",[t._v(t._s(t.articleSubject))])])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("div",{attrs:{id:"article_reader_main_page"},domProps:{innerHTML:t._s(t.articleBody)}})])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[null!=t.articleUin&&t.attachedFiles.length>0?i("div",[i("a",{attrs:{href:"#"},on:{click:t.downloadAllFiles}},[t._v("Скачать все файлы zip архивом")])]):t._e(),t._l(t.attachedFiles,(function(e){return i("div",{key:e.uin,staticClass:"row"},[i("div",{staticClass:"col-1"},[e.uploadedSize>=e.size?i("span",{staticClass:"badge badge-success"},[t._v("OK")]):i("span",{staticClass:"badge badge-warning"},[t._v(t._s(Math.round(e.uploadedSize/e.size*100))+"%")])]),null!=e.id?i("div",{staticClass:"col-7"},[i("a",{attrs:{href:"#"},on:{click:function(s){return t.downloadFile(e.id)}}},[t._v(t._s(e.original_name))])]):i("div",{staticClass:"col-9"},[t._v(t._s(e.original_name))]),i("div",{staticClass:"col-2"},[t._v(t._s(t.formatBytes(e.size)))])])}))],2)])])])])},st=[],it={name:"ArticleReader",data:function(){return{date_format:"dd.MM.yyyy"}},mounted:function(){this.$nextTick((function(){this.getArticle({uin:this.$route.params.uin,version:this.$route.params.version})}))},computed:{articleUin:function(){return this.$store.getters["article/giveUin"]},articleVersion:function(){return this.$store.getters["article/giveVersion"]},articleNextVersion:function(){return this.$store.getters["article/giveNextVersion"]},articlePreviousVersion:function(){return this.$store.getters["article/givePreviousVersion"]},articleSubject:function(){return this.$store.getters["article/giveSubject"]},articleBody:function(){return this.$store.getters["article/giveBody"]},articleOwner:function(){return this.$store.getters["article/giveOwner"]},articleDate:function(){return this.$store.getters["article/giveDate"]},articleTags:function(){return this.$store.getters["tag/giveOnlyForSingleArticle"]},attachedFiles:function(){return this.$store.getters["article_file/give"]}},methods:{formatBytes:function(t,e){return window.$formatBytes(t,e)},formatDate:function(t){var e=new Date;return e.setTime(1e3*t),("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+e.getFullYear()},getArticle:function(t){this.$store.dispatch("article/get",{uin:t.uin,version:t.version})},getNextVersion:function(){this.articleNextVersion&&(this.$router.push({name:"article_reader",params:{uin:this.articleUin,version:this.articleNextVersion}}),this.getArticle({uin:this.articleUin,version:this.articleNextVersion}))},getPreviousVersion:function(){this.articlePreviousVersion&&(this.$router.push({name:"article_reader",params:{uin:this.articleUin,version:this.articlePreviousVersion}}),this.getArticle({uin:this.articleUin,version:this.articlePreviousVersion}))},gotoEditor:function(){this.$router.push({name:"article_editor",params:{uin:this.articleUin}})},createNewInEditor:function(){this.$router.push({name:"article_editor"})},getArticleTags:function(){this.$store.dispatch("tag/get",{article_id:this.articleUin})},getFiles:function(){this.$store.dispatch("article_file/get",{article_id:this.articleUin})},downloadFile:function(t){this.$store.dispatch("article_file/download",{file_id:t})},downloadAllFiles:function(){this.$store.dispatch("article_file/downloadAll",{article_id:this.articleUin})}},watch:{articleUin:function(){null!==this.articleUin&&(this.getArticleTags(),this.getFiles())}}},at=it,rt=(s("5e2a"),Object(c["a"])(at,et,st,!1,null,null,null)),nt=rt.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"article_search_link",on:{click:t.switchIsSearchRulesShown}},[t._v("Правила поиска")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[t.isSearchRulesShown?s("div",{staticClass:"row"},[t._m(0)]):t._e(),s("div",{staticClass:"row"},[s("button",{staticClass:"btn btn-success btn-block",attrs:{type:"button"},on:{click:t.search}},[t.isProgress?s("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v(" В чем сила, брат? (найдено "+t._s(t.countOfArticles)+") ")])]),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.query},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)},input:function(e){e.target.composing||(t.query=e.target.value)}}})]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-10"},t._l(t.articles,(function(e){return s("div",{key:e.uin,staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"row article_search_colored"},[t._v("#"+t._s(e.uin)+" v."+t._s(e.version)+" от "+t._s(t.formatDate(e.date))+" - "+t._s(e.owner))]),s("div",{staticClass:"row"},[s("h4",{staticClass:"article_search_link",on:{click:function(s){return t.gotoReader(e.uin,e.version)}}},[t._v(t._s(e.subject))])]),s("div",{staticClass:"row",domProps:{innerHTML:t._s(t.cutText(e.lowered_body))}})])])})),0),s("div",{staticClass:"col-2"},[t.allTags.length>0?s("div",{staticClass:"row"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:t.setChosenTags}},[t._v("Фильтр")])]):t._e(),t._l(t.mixedTags,(function(e){return s("div",{key:e.name,staticClass:"row align-items-center article_search_checkbox_block "},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.isChecked,expression:"elem.isChecked"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.isChecked)?t._i(e.isChecked,null)>-1:e.isChecked},on:{change:function(s){var i=e.isChecked,a=s.target,r=!!a.checked;if(Array.isArray(i)){var n=null,o=t._i(i,n);a.checked?o<0&&t.$set(e,"isChecked",i.concat([n])):o>-1&&t.$set(e,"isChecked",i.slice(0,o).concat(i.slice(o+1)))}else t.$set(e,"isChecked",r)}}}),s("label",{staticClass:"article_search_checkbox_label",attrs:{for:"checkbox"}},[t._v(t._s(e.name))])])}))],2)])])])])},ct=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col"},[s("p",[t._v('Выполняется регистрозависимый поиск по тексту статьи. Для поиска по автору статьи, номеру статьи, заголовку статьи необходимо использовать соответственно фильтры "author:", "uin:", "subject:", "last:"')]),s("p",[t._v('Например, для поиска статьи под номером 4, надо ввести запрос "uin:4". Для поиска по ключевым словам "балка", "прогиб" статьи, в названии которой есть слова "Расчет", ввести запрос "балка прогиб subject:Расчет". Ограничить кол-во статей в поиске до 10 можно через фильтр "балка прогиб subject:Расчет limit:10", а "limit:100" выведет просто 100 последних статей')])])}],lt=(s("498a"),{name:"ArticleSearch",data:function(){return{date_format:"dd.MM.yyyy",isSearchRulesShown:!1,bodyLength:500,defaultLimit:20}},mounted:function(){this.$nextTick((function(){this.query="limit:"+String(this.defaultLimit)}))},computed:{query:{get:function(){return this.$store.getters["article_search/giveQuery"]},set:function(t){this.$store.commit("article_search/updateQuery",t,{root:!0})}},articles:function(){return this.$store.getters["article_search/giveArticles"]},countOfArticles:function(){return this.articles?this.articles.length:0},isProgress:function(){return this.$store.getters["article_search/giveIsProgress"]},allTags:function(){return this.$store.getters["article_search/giveTags"]},mixedTags:function(){if(null===this.allTags)return[];var t=[];return this.allTags.forEach((function(e){var s={name:e,isChecked:!1};t.push(s)})),t}},methods:{formatDate:function(t){var e=new Date;return e.setTime(1e3*t),("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+e.getFullYear()},search:function(){""!=this.query.trim()?this.$store.dispatch("article_search/getArticles",{}):this.$store.dispatch("notify/showNotifyByCode","E_SEARCH_001",{root:!0})},gotoReader:function(t){this.$router.push({name:"article_reader",params:{uin:t}})},switchIsSearchRulesShown:function(){this.isSearchRulesShown=!this.isSearchRulesShown},cutText:function(t){return t.substring(0,this.bodyLength)},setChosenTags:function(){var t=this.mixedTags.map((function(t){if(!0===t.isChecked)return t.name})).filter((function(t){return t}));this.$store.commit("article_search/updateChosenTags",t)}},watch:{}}),ut=lt,dt=(s("5e5d"),Object(c["a"])(ut,ot,ct,!1,null,null,null)),mt=dt.exports,_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"row"}),t._l(t.items,(function(e,i){return s("div",{key:"tag-"+i,staticClass:"row align-items-center"},[s("div",{staticClass:"col-8"},[s("p",[t._v(t._s(e))])]),s("div",{staticClass:"col-4"},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(s){return t.deleteTag(e)}}},[t._v("Удалить")])])])})),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.listOfTags}},[t._v("Обновить")])]),s("div",{staticClass:"col-2"},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.createTag}},[t._v("Добавить")])]),s("div",{staticClass:"col-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newTagName,expression:"newTagName"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newTagName},on:{input:function(e){e.target.composing||(t.newTagName=e.target.value)}}})])])],2)])},pt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h3",[t._v("Ключевые слова")])])])}],ht={name:"Tag",data:function(){return{newTagName:""}},mounted:function(){this.$nextTick((function(){this.listOfTags()}))},computed:{items:function(){return this.$store.getters["tag/give"]}},methods:{listOfTags:function(){this.$store.dispatch("tag/list")},createTag:function(){this.$store.dispatch("tag/create",this.newTagName)},deleteTag:function(t){this.$store.dispatch("tag/delete",t)}}},vt=ht,ft=Object(c["a"])(vt,_t,pt,!1,null,null,null),gt=ft.exports;i["default"].use(d["a"]);var yt=[{path:"/",redirect:{name:"article_search"}},{path:"/home",name:"home",component:f},{path:"/login",name:"login",component:k},{path:"/admin",name:"admin",component:I},{path:"/admin/setting",name:"setting",component:B},{path:"/admin/user",name:"user",component:z},{path:"/admin/action",name:"action",component:Q},{path:"/article/edit/:uin?",name:"article_editor",component:tt},{path:"/article/read/:uin?/:version?",name:"article_reader",component:nt},{path:"/tag",name:"tag",component:gt},{path:"/article/search",name:"article_search",component:mt}],wt=new d["a"]({mode:"history",base:"/",routes:yt}),bt=wt,Ct=s("2f62"),kt=(s("3ca3"),s("ddb0"),s("2b3d"),void 0),xt={auth_is_token_valid:"/user/is/token/valid",auth_login:"/user/login",auth_login_by_token:"/user/login/token",user_change_password:"/user/change/password",setting_get:"/setting/get",setting_set:"/setting/set",user_get:"/user/get",user_create:"/user/create",user_set:"/user/set",user_set_default_password:"/user/set/default/password",user_delete:"/user/delete",action_get:"/action/get",action_set:"/action/set",article_get:"/article/get",article_set:"/article/set",article_delete:"/article/delete",article_search:"/article/search",article_file_upload:"/article/file/upload",article_file_get:"/article/file/get",article_file_download:"/article/file/download",article_file_download_all:"/article/file/download/all",article_file_delete:"/article/file/delete",tag_list:"/tag/list",tag_create:"/tag/create",tag_delete:"/tag/delete",tag_get:"/tag/get",tag_set:"/tag/set",tag_list_by_article:"/tag/list/by/article",service_database_backup:"/service/database/backup"},$t=function(t,e){return!!Object.prototype.hasOwnProperty.call(xt,e.queryName)||(t.dispatch("notify/showNotifyByCode","E_QUERY_001",{root:!0}),!1)},Et={namespaced:!0,actions:{send:function(t,e){if($t(t,e)){var s=e.data;s.access_token=t.rootGetters["auth/giveAccessToken"];var i=e.queryName,a=function(e){e.data.queryName=i,t.dispatch("response/use",e.data,{root:!0})};a.bind(kt),window.$axios.request({url:xt[e.queryName],data:s,method:"post",timeout:1e4}).then(a).catch((function(e){e.response?(t.dispatch("notify/showNotifyByCode","E_SERVER_002",{root:!0}),console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?(t.dispatch("notify/showNotifyByCode","E_SERVER_001",{root:!0}),console.log(e.request)):(t.dispatch("notify/showNotifyByCode","E_SERVER_003",{root:!0}),console.log("Error",e.message))}))}},sendInOrderToGetFile:function(t,e){if($t(t,e)){var s=e.data;s.access_token=t.rootGetters["auth/giveAccessToken"];var i=function(s){if(1==e.isInline){var i=new Blob([s.data],{type:"application/pdf"}),a=window.URL.createObjectURL(i);window.open(a),window.URL.revokeObjectURL(a)}else{var r=decodeURIComponent(s.headers["content-filename"]);window.$download(s.data,r),null!=e.afterDownloadAction&&t.dispatch(e.afterDownloadAction,{},{root:!0})}};window.$axios({url:xt[e.queryName],data:s,method:"post",headers:{Accept:"*/* "},responseType:"blob",onDownloadProgress:e.progressCallback}).then(i).catch((function(t){e.badFileDownloadCallback(),console.log(t)}))}},sendInOrderToUploadFile:function(t,e){if($t(t,e)){var s=e.queryName,i=function(e){e.data.queryName=s,t.dispatch("response/use",e.data,{root:!0})};i.bind(kt);var a=e.data,r=new FormData;Object.keys(e.data).map((function(t){r.append(t,a[t])})),r.append("access_token",t.rootGetters["auth/giveAccessToken"]),window.$axios({url:xt[e.queryName],data:r,method:"post",headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e.progressCallback}).then(i).catch((function(t){e.badFileUploadCallback(),console.log(t)}))}}}},Nt=function(t){switch(t){case"E_QUERY_001":return{text:"Неверное имя запроса в обработчике запросов",type:"error"};case"E_RESPONSE_001":return{text:"Неверное имя запроса в обработчике ответов",type:"error"};case"E_SERVER_001":return{text:"Сервер не отвечает",type:"error"};case"E_SERVER_002":return{text:"Необработанная ошибка сервера",type:"error"};case"E_SERVER_003":return{text:"Неизвестная ошибка приложения",type:"error"};case"E_AUTH_001":return{text:"Добро пожаловать !!!",type:"success"};case"E_AUTH_002":return{text:"Вы вышли из системы",type:"warn"};case"E_AUTH_003":return{text:"Новый пароль сохранен",type:"success"};case"E_SETTING_001":return{text:"Настройки сохранены",type:"success"};case"E_USER_001":return{text:"Пользователь изменен",type:"success"};case"E_USER_002":return{text:"Пользователь удален",type:"success"};case"E_USER_003":return{text:"Пользователю установлен пароль по умолчанию",type:"success"};case"E_USER_004":return{text:"Пользователь добавлен",type:"success"};case"E_ARTICLE_001":return{text:"Статья сохранена",type:"success"};case"E_ARTICLE_002":return{text:"Статья удалена",type:"success"};case"E_TAG_001":return{text:"Ключевое слово добавлено",type:"success"};case"E_TAG_002":return{text:"Ключевое слово удалено",type:"success"};case"E_TAG_003":return{text:"Статья не имеет ID. Сначала нужно ее сохранить",type:"success"};case"E_TAG_004":return{text:"Ключевые слова сохранены",type:"success"};case"E_SEARCH_001":return{text:"Пустой запрос. Введите что-нибудь",type:"error"};case"E_FILE_001":return{text:"Файл сохранен",type:"success"};case"E_FILE_002":return{text:"Файл удален",type:"success"};case"E_FILE_003":return{text:"ID статьи не определен. Сначала сохраните статью.",type:"warning"};case"E_FILE_004":return{text:"Превышен максимальный размер файла",type:"error"};case"E_DOWNLOAD_001":return{text:"Ошибка скачивания файла",type:"error"};case"E_UPLOAD_001":return{text:"Ошибка загрузки файла",type:"error"};case"0.0":return{title:"Ошибка 0.0",text:"Необработанное исключение",type:"error"};case"1.1":return{title:"Ошибка авторизации 1.1",text:"Неверный логин/пароль. Авторизуйтесь повторно.",type:"error"};case"1.2":return{title:"Ошибка авторизации 1.2",text:"Пользователь отключен.",type:"error"};case"1.3":return{title:"Ошибка авторизации 1.3",text:"Неверный токен. Авторизуйтесь повторно.",type:"error"};case"1.4":return{title:"Ошибка авторизации 1.4",text:"Истек срок годности токена. Авторизуйтесь повторно.",type:"error"};case"1.5":return{title:"Ошибка авторизации 1.5",text:"Доступ запрещен.",type:"error"};case"2.1":return{title:"Ошибка валидации пользователя 2.1",text:"Неверные данные в поле active.",type:"error"};case"2.2":return{title:"Ошибка валидации пользователя 2.2",text:"Неверные данные в поле email.",type:"error"};case"2.3":return{title:"Ошибка валидации пользователя 2.3",text:"Неверные данные в поле name.",type:"error"};case"2.4":return{title:"Ошибка валидации пользователя 2.4",text:"Неверные данные в поле surname.",type:"error"};case"2.5":return{title:"Ошибка валидации пользователя 2.5",text:"Неверные данные в поле role.",type:"error"};case"2.6":return{title:"Ошибка валидации пользователя 2.6",text:"Неверные данные в поле permission_expression.",type:"error"};case"2.7":return{title:"Ошибка создания пользователя 2.7",text:"Введенный e-mail не уникален.",type:"error"};case"2.8":return{title:"Ошибка сохранения пользователя 2.8",text:"Не существует пользователя с данным ID.",type:"error"};case"3.1":return{title:"Ошибка валидации настроек 3.1",text:"Неверные данные в поле items.",type:"error"};case"3.2":return{title:"Ошибка валидации настроек 3.2",text:"Неверные данные в поле name.",type:"error"};case"3.3":return{title:"Ошибка валидации настроек 3.3",text:"Неверные данные в поле value.",type:"error"};case"3.4":return{title:"Ошибка сохранения настроек 3.4",text:"Настройки с данным именем не существует.",type:"error"};case"4.1":return{title:"Ошибка валидации действия 4.1",text:"Неверные данные в поле role.",type:"error"};case"4.2":return{title:"Ошибка валидации действия 4.2",text:"Неверные данные в поле name.",type:"error"};case"4.3":return{title:"Ошибка валидации действия 4.3",text:"Неверные данные в поле state.",type:"error"};case"4.4":return{title:"Ошибка валидации действия 4.4",text:"Неверные данные в поле items.",type:"error"};case"5.1":return{title:"Ошибка валидации статьи 5.1",text:"Неверные данные в поле subject.",type:"error"};case"5.2":return{title:"Ошибка валидации статьи 5.2",text:"Неверные данные в поле body.",type:"error"};case"5.3":return{title:"Ошибка валидации статьи 5.3",text:"Неверные данные в поле uin.",type:"error"};case"5.4":return{title:"Ошибка валидации статьи 5.4",text:"Неверные данные в поле is_attacment_exist.",type:"error"};case"5.5":return{title:"Ошибка сохранения статьи 5.5",text:"Не существует статьи с данным ID.",type:"error"};case"5.6":return{title:"Ошибка получения статьи 5.6",text:"Не существует статьи с данными ID/VERSION.",type:"error"};case"5.7":return{title:"Ошибка удаления статьи 5.7",text:"Не существует статьи с данными ID/VERSION.",type:"error"};case"5.8":return{title:"Ошибка удаления статьи 5.8",text:"Нельзя удалить не последнюю версию статьи.",type:"error"};case"5.9":return{title:"Ошибка валидации статьи 5.9",text:"Неверные данные в поле version.",type:"error"};case"5.10":return{title:"Ошибка валидации статьи 5.10",text:"Неверные данные в запросе.",type:"error"};case"5.11":return{title:"Ошибка удаления статьи 5.11",text:"Нельзя удалить статью, к которой прикреплены файлы",type:"error"};case"6.1":return{title:"Ошибка валидации тэга 6.1",text:"Неверные данные в поле id.",type:"error"};case"6.2":return{title:"Ошибка валидации тэга 6.2",text:"Неверные данные в поле name.",type:"error"};case"6.3":return{title:"Ошибка добавления тэга 6.3",text:"Не существует статьи с данным ID.",type:"error"};case"6.4":return{title:"Ошибка добавления тэга 6.4",text:"Тэг с данным именем не существует.",type:"error"};case"6.5":return{title:"Ошибка валидации тэга 6.5",text:"Неверные данные в поле items.",type:"error"};case"7.1":return{title:"Ошибка загрузки/скачивания файла статьи 7.1",text:"Неверные данные в поле article_id.",type:"error"};case"7.2":return{title:"Ошибка загрузки/скачивания файла статьи 7.2",text:"Неверные данные в поле uin.",type:"error"};case"7.3":return{title:"Ошибка загрузки файла в статью 7.3",text:"Ошибка сохранения файла на сервере",type:"error"};case"7.4":return{title:"Ошибка загрузки файла в статью 7.4",text:"Сервер получил файл, но файл был поврежден во время передачи",type:"error"};case"7.5":return{title:"Ошибка загрузки файла в статью 7.5",text:"Сервер не получил файл",type:"error"};case"7.6":return{title:"Ошибка загрузки файла в статью 7.6",text:"Статьи с данным ID не существует",type:"error"};case"7.7":return{title:"Ошибка скачивания файла статьи 7.7",text:"Файл не существует в базе данных",type:"error"};case"7.8":return{title:"Ошибка скачивания файла статьи 7.8",text:"Файл не существует на сервере",type:"error"};case"7.9":return{title:"Ошибка удаления файла 7.9",text:"Ошибка удаления файла на сервере",type:"error"};case"8.1":return{title:"Ошибка ZIP 8.1",text:"ZIP архив не может быть создан",type:"error"};default:return{title:"Ошибка Уведомления",text:"Неверный текстовый код "+t,type:"error"}}},Tt={namespaced:!0,state:{errors:[]},getters:{giveErrors:function(t){return t.errors}},actions:{showNotifyByCode:function(t,e){i["default"].notify(Object.assign(Nt(e),{group:"notify-group"}))}},mutations:{updateErrors:function(t,e){t.errors=e},cleanErrors:function(t){t.errors=[]}}},It={namespaced:!0,actions:{use:function(t,e){if(0==e.success)t.dispatch("notify/showNotifyByCode",e.error,{root:!0}),t.commit("notify/updateErrors",e.notifications,{root:!0});else switch(e.queryName){case"auth_login":case"auth_login_by_token":t.dispatch("auth_login",e);break;case"auth_check_token":break;case"user_change_password":t.dispatch("user_change_password",e);break;case"user_get":t.dispatch("user_get",e);break;case"user_create":t.dispatch("user_create",e);break;case"user_set":t.dispatch("user_set",e);break;case"user_set_default_password":t.dispatch("user_set_default_password",e);break;case"user_delete":t.dispatch("user_delete",e);break;case"setting_get":t.dispatch("setting_get",e);break;case"setting_set":t.dispatch("setting_set",e);break;case"action_get":t.dispatch("action_get",e);break;case"action_set":t.dispatch("action_set",e);break;case"article_get":t.dispatch("article_get",e);break;case"article_set":t.dispatch("article_set",e);break;case"article_delete":t.dispatch("article_delete",e);break;case"article_search":t.dispatch("article_search",e);break;case"tag_list":t.dispatch("tag_list",e);break;case"tag_create":t.dispatch("tag_create",e);break;case"tag_delete":t.dispatch("tag_delete",e);break;case"tag_get":t.dispatch("tag_get",e);break;case"tag_set":t.dispatch("tag_set",e);break;case"tag_list_by_article":t.dispatch("tag_list_by_article",e);break;case"article_file_get":t.dispatch("article_file_get",e);break;case"article_file_upload":t.dispatch("article_file_upload",e);break;case"article_file_delete":t.dispatch("article_file_delete",e);break;default:t.dispatch("notify/showNotifyByCode","E_RESPONSE_001",{root:!0})}},auth_login:function(t,e){1==e.success?(t.commit("auth/setUser",e,{root:!0}),t.dispatch("notify/showNotifyByCode","E_AUTH_001",{root:!0})):t.commit("auth/setUser",{access_token:"",name:"",surname:"",role:"guest",email:""},{root:!0})},user_change_password:function(t,e){1==e.success&&t.dispatch("notify/showNotifyByCode","E_AUTH_003",{root:!0})},user_get:function(t,e){1==e.success&&t.commit("users/update",e.items,{root:!0})},user_create:function(t,e){1==e.success&&(t.dispatch("notify/showNotifyByCode","E_USER_004",{root:!0}),t.dispatch("users/get",t.rootGetters["users/givePreviousSearch"],{root:!0}))},user_set:function(t,e){1==e.success&&(t.dispatch("notify/showNotifyByCode","E_USER_001",{root:!0}),t.dispatch("users/get",t.rootGetters["users/givePreviousSearch"],{root:!0}))},user_set_default_password:function(t,e){1==e.success&&t.dispatch("notify/showNotifyByCode","E_USER_003",{root:!0})},user_delete:function(t,e){1==e.success&&(t.dispatch("notify/showNotifyByCode","E_USER_002",{root:!0}),t.dispatch("users/get",t.rootGetters["users/givePreviousSearch"],{root:!0}))},setting_get:function(t,e){1==e.success&&t.commit("setting/update",e.items,{root:!0})},setting_set:function(t,e){1==e.success&&t.dispatch("notify/showNotifyByCode","E_SETTING_001",{root:!0})},action_get:function(t,e){1==e.success&&t.commit("action/update",e.items,{root:!0})},action_set:function(t,e){1==e.success&&(t.dispatch("notify/showNotifyByCode","E_SETTING_001",{root:!0}),t.dispatch("action/get",{},{root:!0}))},article_get:function(t,e){1==e.success&&t.commit("article/update",e,{root:!0})},article_delete:function(t,e){1==e.success&&(t.dispatch("notify/showNotifyByCode","E_ARTICLE_002",{root:!0}),1==e.version?t.commit("article/new",{},{root:!0}):t.dispatch("article/get",{uin:e.uin},{root:!0}))},article_set:function(t,e){1==e.success&&(t.dispatch("notify/showNotifyByCode","E_ARTICLE_001",{root:!0}),t.dispatch("article/get",{uin:e.uin,version:e.version},{root:!0}))},article_search:function(t,e){1==e.success&&t.dispatch("article_search/setArticles",e.items,{root:!0})},tag_list:function(t,e){1==e.success&&t.commit("tag/update",e.items,{root:!0})},tag_create:function(t,e){1==e.success&&(t.dispatch("notify/showNotifyByCode","E_TAG_001",{root:!0}),t.dispatch("tag/list",{},{root:!0}))},tag_delete:function(t,e){1==e.success&&(t.dispatch("notify/showNotifyByCode","E_TAG_002",{root:!0}),t.dispatch("tag/list",{},{root:!0}))},tag_get:function(t,e){1==e.success&&t.commit("tag/updateOnlyForSingleArticle",e.items,{root:!0})},tag_set:function(t,e){1==e.success&&(t.dispatch("notify/showNotifyByCode","E_TAG_004",{root:!0}),t.dispatch("tag/get",{article_id:e.article_id},{root:!0}))},tag_list_by_article:function(t,e){1==e.success&&t.commit("article_search/updateTags",e,{root:!0})},article_file_get:function(t,e){1==e.success&&t.commit("article_file/update",e.items,{root:!0})},article_file_delete:function(t,e){1==e.success&&(t.dispatch("notify/showNotifyByCode","E_FILE_002",{root:!0}),t.commit("article_file/deleteSuccess",e.uin,{root:!0}))},article_file_upload:function(t,e){1==e.success&&(t.dispatch("notify/showNotifyByCode","E_FILE_001",{root:!0}),t.commit("article_file/uploadSuccess",e,{root:!0}))}}},At={namespaced:!0,state:{access_token:"",name:"",surname:"",role:"guest",email:"",isDefaultPassword:!1},getters:{isAuthenticated:function(t){return""!=t.access_token},giveAccessToken:function(t){return""==t.access_token?window.$cookies.get("access_token"):t.access_token},giveName:function(t){return t.name},giveSurname:function(t){return t.surname},giveRole:function(t){return t.role},giveEmail:function(t){return t.email},giveIsDefaultPassword:function(t){return t.isDefaultPassword}},mutations:{setUser:function(t,e){t.access_token=e.access_token,t.name=e.name,t.surname=e.surname,t.role=e.role,t.email=e.email,t.id=e.id,t.isDefaultPassword=e.isDefaultPassword,window.$cookies.set("access_token",e.access_token)},setAccessTokenUsingCookie:function(t){t.access_token=window.$cookies.get("access_token")}},actions:{isTokenValid:function(t){var e={queryName:"auth_is_token_valid",data:{}};t.dispatch("query/send",e,{root:!0})},login:function(t,e){var s={queryName:"auth_login",data:{email:e.email,password:e.password}};t.dispatch("query/send",s,{root:!0})},loginByToken:function(t){var e={queryName:"auth_login_by_token",data:{access_token:t.getters["auth/giveAccessToken"]}};t.dispatch("query/send",e,{root:!0})},logout:function(t){t.commit("auth/setUser",{access_token:"",name:"",surname:"",role:"guest",email:""},{root:!0}),t.dispatch("notify/showNotifyByCode","E_AUTH_002",{root:!0})},changePassword:function(t,e){var s={queryName:"user_change_password",data:{password:e.password}};t.dispatch("query/send",s,{root:!0})}}},St={namespaced:!0,actions:{getDatabaseBackup:function(t){var e={queryName:"service_database_backup",data:{}};t.dispatch("query/sendInOrderToGetFile",e,{root:!0})}}},Ot={namespaced:!0,state:{items:null},getters:{give:function(t){return t.items}},mutations:{update:function(t,e){t.items=e}},actions:{get:function(t){var e={queryName:"setting_get",data:{}};t.dispatch("query/send",e,{root:!0})},set:function(t){var e={queryName:"setting_set",data:{items:t.state.items}};t.dispatch("query/send",e,{root:!0})}}},Pt={namespaced:!0,state:{items:null,userId:null,previousSearch:{}},getters:{give:function(t){return t.items},givePreviousSearch:function(t){return t.previousSearch}},mutations:{update:function(t,e){t.items=e}},actions:{get:function(t,e){var s={queryName:"user_get",data:e};t.state.previousSearch=e,t.dispatch("query/send",s,{root:!0})},create:function(t,e){var s={queryName:"user_create",data:e};t.dispatch("query/send",s,{root:!0})},set:function(t,e){var s={queryName:"user_set",data:e};t.dispatch("query/send",s,{root:!0})},setDefaultPassword:function(t,e){var s={queryName:"user_set_default_password",data:e};t.dispatch("query/send",s,{root:!0})},del:function(t,e){var s={queryName:"user_delete",data:{id:e.id}};t.dispatch("query/send",s,{root:!0})}}},qt={namespaced:!0,state:{items:null},getters:{give:function(t){return t.items}},mutations:{update:function(t,e){t.items=e}},actions:{get:function(t){var e={queryName:"action_get",data:{}};t.dispatch("query/send",e,{root:!0})},set:function(t,e){var s={queryName:"action_set",data:e};t.dispatch("query/send",s,{root:!0})}}},Bt={namespaced:!0,state:{uin:null,version:null,max_version:null,subject:"",body:"",is_attachment_exist:null,owner:"",date:""},getters:{giveUin:function(t){return t.uin},giveVersion:function(t){return t.version},giveMaxVersion:function(t){return t.version},givePreviousVersion:function(t){return t.version>1&&t.version-1},giveNextVersion:function(t){return t.version<t.max_version&&t.version+1},giveSubject:function(t){return t.subject},giveBody:function(t){return t.body},giveIsAttachmentExist:function(t){return t.is_attachment_exist},giveOwner:function(t){return t.owner},giveDate:function(t){return t.date}},mutations:{update:function(t,e){t.uin=parseInt(e.uin),t.version=parseInt(e.version),t.max_version=parseInt(e.max_version),t.subject=e.subject,t.body=e.body,t.is_attachment_exist=e.is_attachment_exist,t.owner=e.owner,t.date=e.date},updateUin:function(t,e){t.uin=parseInt(e)},updateVersion:function(t,e){t.version=parseInt(e)},updateSubject:function(t,e){t.subject=e},updateBody:function(t,e){t.body=e},new:function(t){t.uin=null,t.version=null,t.max_version=null,t.subject="",t.body="",t.is_attachment_exist=null,t.owner="",t.date=""}},actions:{get:function(t,e){var s={queryName:"article_get",data:{uin:e.uin,version:e.version}};t.dispatch("query/send",s,{root:!0})},set:function(t){var e={queryName:"article_set",data:{uin:t.state.uin,subject:t.state.subject,body:t.state.body}};t.dispatch("query/send",e,{root:!0})},delete:function(t){var e={queryName:"article_delete",data:{uin:t.state.uin,version:t.state.version}};t.dispatch("query/send",e,{root:!0})}}},Ut={namespaced:!0,state:{query:"",articles:[],tags:[],chosenTags:[],tags_by_article:{},isProgress:!1},getters:{giveQuery:function(t){return t.query},giveArticles:function(t){for(var e=[],s=function(s){var i=parseInt(t.articles[s].uin),a=Object.prototype.hasOwnProperty.call(t.tags_by_article,i)?t.tags_by_article[i]:[],r=t.chosenTags.filter((function(t){return!a.includes(t)}));0==r.length&&e.push(t.articles[s])},i=0;i<t.articles.length;i++)s(i);return e},giveTags:function(t){return t.tags},giveIsProgress:function(t){return t.isProgress}},mutations:{updateQuery:function(t,e){t.query=e},updateArticles:function(t,e){t.articles=e.map((function(t){return t.body=t.body.slice(0,500),t})),t.isProgress=!1},updateTags:function(t,e){t.tags=e.list_of_names,t.chosenTags=[],t.tags_by_article=e.list_by_id},updateChosenTags:function(t,e){t.chosenTags=e}},actions:{setArticles:function(t,e){t.commit("article_search/updateArticles",e,{root:!0}),t.dispatch("article_search/getTags",{},{root:!0})},getArticles:function(t){t.state.isProgress=!0;var e={queryName:"article_search",data:{query:t.state.query}};t.dispatch("query/send",e,{root:!0})},getTags:function(t){var e={queryName:"tag_list_by_article",data:{id_list:t.state.articles.map((function(t){return t.uin}))}};t.dispatch("query/send",e,{root:!0})}}},Dt=(s("a434"),{namespaced:!0,state:{items:[]},getters:{give:function(t){return t.items}},mutations:{update:function(t,e){e.map((function(t){t.uploadedSize=t.size})),t.items=e},add:function(t,e){t.items.push(e)},deleteSuccess:function(t,e){t.items.map((function(s,i){s.uin==e&&t.items.splice(i,1)}))},uploadSuccess:function(t,e){for(var s=0;s<t.items.length;s++)if(t.items[s].uin==e.uin){t.items[s].id=e.id;break}},updateProgress:function(t,e){for(var s=0;s<t.items.length;s++)if(t.items[s].uin==e.uin){t.items[s].size=e.size,t.items[s].uploadedSize=e.uploadedSize;break}},newArticle:function(t){t.items=[]}},actions:{delete:function(t,e){var s={queryName:"article_file_delete",data:{file_id:e.file_id}};t.dispatch("query/send",s,{root:!0})},get:function(t,e){var s={queryName:"article_file_get",data:{article_id:e.article_id}};t.dispatch("query/send",s,{root:!0})},download:function(t,e){var s={queryName:"article_file_download",data:{file_id:e.file_id}};t.dispatch("download/do",s,{root:!0})},downloadAll:function(t,e){var s={queryName:"article_file_download_all",data:{article_id:e.article_id}};t.dispatch("download/do",s,{root:!0})},upload:function(t,e){var s=window.$guid();t.commit("add",{id:null,uin:s,original_name:e.file.name,size:e.file.size,uploadedSize:0});var i=function(t,e,s){this.commit("updateProgress",{uin:t,size:s,uploadedSize:e})},a=i.bind(t),r=function(){this.commit("article_file/deleteSuccess",s,{root:!0}),this.dispatch("notify/showNotifyByCode","E_UPLOAD_001",{root:!0})},n={queryName:"article_file_upload",data:Object.assign(e,{uin:s}),progressCallback:function(t){a(s,t.loaded,t.total)},badFileUploadCallback:r.bind(t)};t.dispatch("query/sendInOrderToUploadFile",n,{root:!0})}}}),Ft={namespaced:!0,state:{items:[]},getters:{give:function(t){return t.items}},mutations:{update:function(t,e){e.map((function(t){t.downloadedSize=t.size})),t.items=e},add:function(t,e){t.items.push(e)},updateProgress:function(t,e){for(var s=0;s<t.items.length;s++)if(t.items[s].uin==e.uin){t.items[s].size=Number(e.size),t.items[s].downloadedSize=Number(e.downloadedSize),t.items[s].downloadedSize>=t.items[s].size&&t.items.splice(s,1);break}},deleteSuccess:function(t,e){t.items.map((function(s,i){s.uin==e&&t.items.splice(i,1)}))}},actions:{do:function(t,e){var s=window.$guid();t.commit("add",{uin:s,size:0,downloadedSize:0});var i=function(t,e,s){this.commit("updateProgress",{uin:t,size:s,downloadedSize:e})},a=i.bind(t),r=function(){this.commit("download/deleteSuccess",s,{root:!0}),this.dispatch("notify/showNotifyByCode","E_DOWNLOAD_001",{root:!0})},n={uin:s,queryName:e.queryName,data:e.data,isInline:!1,progressCallback:function(t){a(s,t.loaded,t.total)},badFileDownloadCallback:r.bind(t)};t.dispatch("query/sendInOrderToGetFile",n,{root:!0})}}},Rt={namespaced:!0,state:{items:null,itemsForArticle:[]},getters:{give:function(t){return t.items},giveOnlyForSingleArticle:function(t){return t.itemsForArticle}},mutations:{update:function(t,e){t.items=e},updateOnlyForSingleArticle:function(t,e){t.itemsForArticle=e},newArticle:function(t){t.itemsForArticle=[]}},actions:{list:function(t){var e={queryName:"tag_list",data:{}};t.dispatch("query/send",e,{root:!0})},create:function(t,e){var s={queryName:"tag_create",data:{name:e}};t.dispatch("query/send",s,{root:!0})},delete:function(t,e){var s={queryName:"tag_delete",data:{name:e}};t.dispatch("query/send",s,{root:!0})},get:function(t,e){var s={queryName:"tag_get",data:{article_id:e.article_id}};t.dispatch("query/send",s,{root:!0})},set:function(t,e){var s={queryName:"tag_set",data:{article_id:e.article_id,items:e.items}};t.dispatch("query/send",s,{root:!0})}}},jt=(s("99af"),["/","/home","/login","?/article/read","/article/search"]),zt=[],Vt=["/tag","?/article/edit"],Lt=["?/admin"],Mt={guest:jt,reader:jt.concat(zt),editor:jt.concat(zt).concat(Vt),admin:jt.concat(zt).concat(Vt).concat(Lt)},Gt={namespaced:!0,state:{isOk:!1},getters:{mayEnter:function(t){return t.isOk}},mutations:{path:function(t,e){if(t.isOk=!1,Object.prototype.hasOwnProperty.call(Mt,e.role)){var s=Mt[e.role];s.forEach((function(s){if(!1===t.isOk){var i=s,a=!0;"?"===s[0]&&(i=s.substring(1),a=!1),!0===a?i==e.path&&(t.isOk=!0):e.path.includes(i)&&(t.isOk=!0)}}))}}}};i["default"].use(Ct["a"]);var Ht=new Ct["a"].Store({modules:{response:It,query:Et,notify:Tt,auth:At,service:St,setting:Ot,users:Pt,action:qt,article:Bt,tag:Rt,article_search:Ut,roles:Gt,article_file:Dt,download:Ft}}),Qt=s("0b26"),Kt=s.n(Qt),Yt=s("5f5b"),Zt=s("bc3a"),Jt=s.n(Zt),Wt=s("ee98"),Xt=s.n(Wt),te=s("2b27"),ee=s.n(te),se=s("19de"),ie=s.n(se),ae=s("fa33"),re=s("5873");s("f9e3"),s("2dd8");i["default"].use(Yt["a"]),i["default"].use(Xt.a),i["default"].use(ee.a),i["default"].component("datepicker",ae["a"]),i["default"].component("editor",re["a"]),i["default"].config.productionTip=!1,bt.beforeEach((function(t,e,s){Ht.commit("roles/path",{path:t.path,role:void 0==Ht.getters["auth/giveRole"]?"guest":Ht.getters["auth/giveRole"]}),0==Ht.getters["roles/mayEnter"]?(Ht.dispatch("notify/showNotifyByCode","1.5"),s({name:"login"})):s()})),new i["default"]({router:bt,store:Ht,render:function(t){return t(u)}}).$mount("#app"),window.$axios=Jt.a.create({baseURL:"http://api.know/api"}),window.$sha256=Kt.a,window.$download=ie.a,window.$guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},window.$formatBytes=function(t,e){if(0==t)return"0 Bytes";var s=1024,i=e||2,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(t)/Math.log(s));return parseFloat((t/Math.pow(s,r)).toFixed(i))+" "+a[r]}},"5ced":function(t,e,s){},"5e2a":function(t,e,s){"use strict";var i=s("7fd9"),a=s.n(i);a.a},"5e5d":function(t,e,s){"use strict";var i=s("e7d9"),a=s.n(i);a.a},"6b5e":function(t,e,s){t.exports=s.p+"img/prev_gray.7443cccd.png"},"71b8":function(t,e,s){t.exports=s.p+"img/next_gray.57e5045a.png"},"7be2":function(t,e,s){},"7fd9":function(t,e,s){},"85ec":function(t,e,s){},b545:function(t,e,s){"use strict";var i=s("32ff"),a=s.n(i);a.a},cccb:function(t,e,s){"use strict";var i=s("5ced"),a=s.n(i);a.a},d6db:function(t,e,s){"use strict";var i=s("e67a"),a=s.n(i);a.a},e67a:function(t,e,s){},e7d9:function(t,e,s){},e8c3:function(t,e,s){"use strict";var i=s("7be2"),a=s.n(i);a.a}});
//# sourceMappingURL=app.8d351cdf.js.map